<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Amazing Brain Journey - Self Assessment</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="styles.css"> <style>
        /* NEW COLOR DEFINITIONS FOR TAILWIND */
        :root {
            --sage: #7C9885;
            --cream: #FAF7F0;
            --charcoal: #2F2F2F;
            --gold: #D4AF37;
            --white: #FFFFFF;
            --radius: 10px;
        }

        /* NEW FONT OVERRIDES */
        body { 
            font-family: var(--font-body); /* Lato */
            background: var(--color-background); /* Off-white */
            min-height: 100vh;
            padding-top: 80px; /* Space for fixed header */
        }
        
        .floating {
            animation: none; /* Removed playful floating */
        }
        
        .bounce-in {
            /* Kept subtle animation for intro */
            animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        /* Replaced Rainbow Text with a simple gradient */
        .premium-text-gradient {
            background: linear-gradient(to right, var(--sage), var(--gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Replaced Star Burst with a cleaner look */
        .burst-effect {
            position: absolute;
            animation: subtle-pulse 0.5s ease-out forwards;
        }
        
        @keyframes subtle-pulse {
            0% { transform: scale(0.5); opacity: 0.8; }
            100% { transform: scale(1.5); opacity: 0; }
        }
        
        .progress-star {
            color: var(--sage) !important;
        }
        
        .progress-star.filled {
            color: var(--gold) !important;
            transform: scale(1.1) !important;
        }
    </style>
</head>
<body>
    <div id="navigation-placeholder"></div>
    <div id="root"></div> 

    <div id="footer-placeholder"></div>

    <script>
        // Use Fetch to inject components above/below React root
        fetch('navigation.html').then(response => response.text()).then(data => {
            document.getElementById('navigation-placeholder').innerHTML = data;
        });
        fetch('footer.html').then(response => response.text()).then(data => {
            document.getElementById('footer-placeholder').innerHTML = data;
        });
    </script>
    
    <script src="script.js"></script>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        
        // EMOJI REPLACEMENT (Updated to use more sophisticated/cleaner emojis)
        const SECTION_EMOJIS = {
            'emotional': 'üíñ',
            'confidence': 'üëë',
            'friendship': 'ü§ù',
            'sensory': 'üëÇ',
            'motivation': 'üí°',
            'overthinking': 'üß†',
            'executive': 'üß≠',
            'learning': 'üìö'
        };

        // ... (SECTIONS data remains the same) ...

        const SECTIONS = [
            {
                id: 'emotional',
                title: 'Emotional Awareness',
                emoji: 'üíñ',
                color: 'from-rose-400 to-red-400',
                questions: [
                    "I can usually tell what I'm feeling inside.",
                    "Sometimes my feelings get big fast and I don't know why.",
                    "I can explain my feelings to someone if they ask.",
                    "When I'm upset, I know what helps me feel better.",
                    "I get overwhelmed by feelings I don't expect.",
                    "I feel emotions stronger than most kids I know."
                ]
            },
            {
                id: 'confidence',
                title: 'Self-Confidence & Identity',
                emoji: 'üëë',
                color: 'from-amber-400 to-yellow-400',
                questions: [
                    "I feel confident doing things I'm good at.",
                    "Sometimes I pretend to be less smart or less silly to fit in.",
                    "I feel proud of who I am as a person.",
                    "I worry what other people think of me.",
                    "I feel different from most kids ‚Äî in a good way.",
                    "When something is hard, I believe I can learn it eventually."
                ]
            },
            {
                id: 'friendship',
                title: 'Friendship & Social Safety',
                emoji: 'ü§ù',
                color: 'from-sage-400 to-green-400',
                questions: [
                    "I can tell when someone is safe to be around.",
                    "I get nervous meeting new kids.",
                    "I like friends who are gentle and kind.",
                    "Loud or bossy kids make me uncomfortable.",
                    "I sometimes worry people will laugh at me.",
                    "I have at least one person who makes me feel totally myself."
                ]
            },
            {
                id: 'sensory',
                title: 'Sensory Reactions',
                emoji: 'üëÇ',
                color: 'from-blue-400 to-indigo-400',
                questions: [
                    "Loud noises bother me a lot.",
                    "Bright lights or busy places make me uncomfortable.",
                    "I don't like certain textures in clothes.",
                    "I get overwhelmed if too much is happening at once.",
                    "I need quiet time to calm my brain.",
                    "Strong smells (like perfume or cleaners) bother me."
                ]
            },
            {
                id: 'motivation',
                title: 'Motivation Patterns',
                emoji: 'üí°',
                color: 'from-purple-400 to-pink-400',
                questions: [
                    "I get excited when I'm working on something I love.",
                    "If something doesn't make sense to me, I don't want to do it.",
                    "I need a reason for things ‚Äî not just 'because.'",
                    "I try really hard when I care about something.",
                    "It's hard to start tasks that feel boring.",
                    "Praise or rewards make me want to keep going."
                ]
            },
            {
                id: 'overthinking',
                title: 'Overthinking & Stress Patterns',
                emoji: 'üß†',
                color: 'from-slate-400 to-gray-400',
                questions: [
                    "I think a lot about 'what if' things.",
                    "I get stuck worrying even when I don't want to.",
                    "I freeze when I don't know what to do next.",
                    "I get frustrated with myself easily.",
                    "I replay things in my head after they happen.",
                    "I avoid things that feel too hard or scary."
                ]
            },
            {
                id: 'executive',
                title: 'Executive Function & Focus',
                emoji: 'üß≠',
                color: 'from-emerald-400 to-teal-400',
                questions: [
                    "I forget things even when I try not to.",
                    "It's hard to switch tasks when my brain is focused.",
                    "I lose things like pencils, shoes, or homework.",
                    "I get distracted even when I want to pay attention.",
                    "I need help staying organized.",
                    "I have trouble finishing things I start."
                ]
            },
            {
                id: 'learning',
                title: 'Learning Style',
                emoji: 'üìö',
                color: 'from-sky-400 to-cyan-400',
                questions: [
                    "I learn best when I can see pictures or diagrams.",
                    "I learn best by doing things, not just talking.",
                    "I like learning alone (not in big groups).",
                    "I learn better when things are explained clearly.",
                    "I need examples before I understand assignments.",
                    "I learn better in quiet places than noisy ones."
                ]
            }
        ];

        const SCALE = [
            { value: 0, label: 'Not like me', emoji: 'üòê', color: 'bg-gray-100' },
            { value: 1, label: 'A little like me', emoji: 'ü§î', color: 'bg-yellow-100' },
            { value: 2, label: 'Mostly like me', emoji: 'üôÇ', color: 'bg-indigo-100' },
            { value: 3, label: 'Exactly like me', emoji: '‚≠ê', color: 'bg-sage-100' } // Using a placeholder sage color, will map to real color in utility
        ];

        // Star component for visual effects
        function BurstEffect({ x, y }) {
            return (
                <div 
                    className="burst-effect text-gold text-2xl"
                    style={{ left: x, top: y, color: 'var(--color-accent)' }}
                >
                    ‚ú¶
                </div>
            );
        }

        // Main App Component
        function ChildAssessmentApp() {
            const [currentSectionIndex, setCurrentSectionIndex] = useState(0);
            const [answers, setAnswers] = useState({});
            const [showResults, setShowResults] = useState(false);
            const [stars, setStars] = useState([]);
            const [showIntro, setShowIntro] = useState(true);

            const currentSection = SECTIONS[currentSectionIndex];

            useEffect(() => {
                const timer = setTimeout(() => setStars([]), 500);
                return () => clearTimeout(timer);
            }, [stars]);

            const getQuestionId = (sectionIndex, questionIndex) => 
                `${SECTIONS[sectionIndex].id}-${questionIndex}`;

            const handleOptionSelect = (sectionIndex, questionIndex, value, event) => {
                const rect = event.target.getBoundingClientRect();
                const newStar = {
                    id: Date.now(),
                    x: rect.left + rect.width / 2 - 12,
                    y: rect.top + rect.height / 2 - 12
                };
                setStars([...stars, newStar]);

                setAnswers(prev => ({
                    ...prev,
                    [getQuestionId(sectionIndex, questionIndex)]: value
                }));
            };

            const isSectionComplete = (sectionIndex) => {
                return SECTIONS[sectionIndex].questions.every((_, qIdx) => 
                    answers[getQuestionId(sectionIndex, qIdx)] !== undefined
                );
            };

            const calculateSectionScore = (sectionIndex) => {
                const section = SECTIONS[sectionIndex];
                let score = 0;
                let maxScore = section.questions.length * 3;

                section.questions.forEach((_, qIdx) => {
                    const val = answers[getQuestionId(sectionIndex, qIdx)];
                    if (val !== undefined) score += val;
                });

                return {
                    score,
                    maxScore,
                    percentage: Math.round((score / maxScore) * 100)
                };
            };

            const handleNext = () => {
                if (currentSectionIndex < SECTIONS.length - 1) {
                    setCurrentSectionIndex(prev => prev + 1);
                } else {
                    setShowResults(true);
                }
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            const generateReport = () => {
                let report = "CHILD SELF-ASSESSMENT REPORT\n";
                report += "============================\n\n";
                
                SECTIONS.forEach((section, idx) => {
                    const stats = calculateSectionScore(idx);
                    report += `${section.emoji} ${section.title}\n`;
                    report += `Score: ${stats.score} / ${stats.maxScore} (${stats.percentage}%)\n`;
                    report += `Intensity: ${stats.percentage > 66 ? 'High' : stats.percentage > 33 ? 'Moderate' : 'Low'}\n\n`;
                });

                report += "RAW DATA (JSON Format):\n";
                report += JSON.stringify(answers);
                
                return report;
            };

            // Intro Screen (Updated to use new clean aesthetic)
            if (showIntro) {
                return (
                    <div className="min-h-screen flex items-center justify-center p-8">
                        <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full bounce-in">
                            <div className="text-center">
                                <h1 className="text-4xl font-bold mb-4 premium-text-gradient">
                                    My Amazing Brain Journey
                                </h1>
                                <div className="text-5xl mb-6" style={{ color: 'var(--color-accent)' }}>üß†‚ú®</div>
                                <p className="text-xl text-gray-700 mb-8 font-serif" style={{ fontFamily: 'var(--font-header)' }}>
                                    Hi there! This is a simple assessment to learn about how your unique brain works. There are no right or wrong answers!
                                </p>
                                <button
                                    onClick={() => setShowIntro(false)}
                                    className="btn-primary" // Use new CSS class
                                    style={{ padding: '15px 40px', fontSize: '1.2rem' }}
                                >
                                    Let's Begin! <i class="fas fa-rocket"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            // Results Screen (Updated to use new clean aesthetic)
            if (showResults) {
                return (
                    <div className="min-h-screen p-8">
                        <div className="max-w-4xl mx-auto">
                            <div className="bg-white rounded-3xl shadow-2xl p-8 mb-8" style={{ border: '1px solid var(--color-secondary)' }}>
                                <h1 className="text-3xl font-bold text-center mb-2 premium-text-gradient">
                                    Your Brain Map
                                </h1>
                                <p className="text-center text-gray-600 mb-8">
                                    You successfully completed the journey!
                                </p>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                    {SECTIONS.map((section, idx) => {
                                        const stats = calculateSectionScore(idx);
                                        const intensity = stats.percentage > 66 ? 'High' : 
                                                        stats.percentage > 33 ? 'Moderate' : 'Low';
                                        
                                        const intensityColor = stats.percentage > 66 ? 'text-red-500' : stats.percentage > 33 ? 'text-orange-500' : 'text-green-500';

                                        return (
                                            <div 
                                                key={section.id} 
                                                className={`rounded-2xl p-6 bg-white border border-gray-100 shadow-sm`}
                                            >
                                                <div className="flex items-center justify-between mb-3">
                                                    <h3 className="text-lg font-bold flex items-center text-charcoal">
                                                        <span className="text-xl mr-2" style={{ color: 'var(--color-primary)' }}>{section.emoji}</span>
                                                        {section.title}
                                                    </h3>
                                                    <span className={`text-lg font-bold ${intensityColor}`}>
                                                        {stats.percentage}%
                                                    </span>
                                                </div>
                                                
                                                <div className="bg-gray-200 rounded-full h-3 overflow-hidden">
                                                    <div 
                                                        className={`h-full rounded-full transition-all duration-1000`}
                                                        style={{ 
                                                            width: `${stats.percentage}%`,
                                                            backgroundColor: stats.percentage > 66 ? 'var(--color-terracotta)' : stats.percentage > 33 ? 'var(--color-accent)' : 'var(--color-primary)'
                                                        }}
                                                    />
                                                </div>
                                                
                                                <p className="mt-3 text-xs font-medium text-gray-500">
                                                    Intensity: {intensity}
                                                </p>
                                            </div>
                                        );
                                    })}
                                </div>

                                <div className="bg-sage-50 rounded-2xl p-6 mb-6" style={{ backgroundColor: 'var(--color-secondary)' }}>
                                    <h3 className="text-xl font-bold mb-3" style={{ color: 'var(--color-primary)' }}>
                                        <i class="fas fa-chart-line"></i> Next Steps
                                    </h3>
                                    <p className="text-gray-700">
                                        Your brain is unique and special! Now, share these results with your grown-up so they can find the best strategies for your learning and growth.
                                    </p>
                                </div>

                                <div className="text-center">
                                    <button
                                        onClick={() => {
                                            const report = generateReport();
                                            navigator.clipboard.writeText(report);
                                            alert('Results copied! Share them with a grown-up who can help! üìã');
                                        }}
                                        className="btn-primary btn-secondary"
                                    >
                                        Copy My Results üìã
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // Question Screen
            return (
                <div className="min-h-screen p-4 md:p-8 pt-20">
                    {stars.map(star => (
                        <BurstEffect key={star.id} x={star.x} y={star.y} />
                    ))}
                    
                    <div className="max-w-3xl mx-auto">
                        {/* Progress Stars */}
                        <div className="flex justify-center mb-6 space-x-2">
                            {SECTIONS.map((section, idx) => (
                                <div
                                    key={section.id}
                                    className={`text-xl transition-all duration-300 progress-star ${
                                        idx < currentSectionIndex ? 'filled' : ''
                                    }`}
                                    title={section.title}
                                >
                                    {idx < currentSectionIndex ? '‚ú¶' : 
                                     idx === currentSectionIndex ? section.emoji : '‚óã'}
                                </div>
                            ))}
                        </div>

                        {/* Main Card */}
                        <div className="bg-white rounded-3xl shadow-2xl overflow-hidden" style={{ border: '1px solid var(--color-secondary)' }}>
                            {/* Section Header */}
                            <div className={`bg-gradient-to-r from-sage-400 to-sage-600 p-6 text-white`} style={{ backgroundColor: 'var(--color-primary)' }}>
                                <div className="flex items-center justify-between">
                                    <h2 className="text-xl font-bold flex items-center">
                                        <span className="text-3xl mr-3">{currentSection.emoji}</span>
                                        {currentSection.title}
                                    </h2>
                                    <span className="text-lg">
                                        {currentSectionIndex + 1} / {SECTIONS.length}
                                    </span>
                                </div>
                            </div>

                            {/* Questions */}
                            <div className="p-6 md:p-8 space-y-8">
                                {currentSection.questions.map((question, qIdx) => {
                                    const questionId = getQuestionId(currentSectionIndex, qIdx);
                                    const currentValue = answers[questionId];

                                    return (
                                        <div key={qIdx} className="space-y-4">
                                            <p className="text-lg font-medium text-gray-800" style={{ fontFamily: 'var(--font-header)' }}>
                                                {qIdx + 1}. {question}
                                            </p>

                                            <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                                                {SCALE.map((option) => (
                                                    <button
                                                        key={option.value}
                                                        onClick={(e) => handleOptionSelect(
                                                            currentSectionIndex, qIdx, option.value, e
                                                        )}
                                                        className={`
                                                            p-3 rounded-xl border-2 transition-all duration-300
                                                            transform hover:scale-105
                                                            ${currentValue === option.value
                                                                ? 'border-gold bg-cream-50 scale-105 shadow-md'
                                                                : 'bg-gray-50 border-gray-100 hover:border-cream'
                                                            }
                                                        `}
                                                        style={{ 
                                                            '--tw-border-opacity': currentValue === option.value ? '1' : '0.5',
                                                            'borderColor': currentValue === option.value ? 'var(--color-accent)' : 'var(--color-secondary)',
                                                            'backgroundColor': currentValue === option.value ? 'var(--color-secondary)' : 'var(--color-background)',
                                                            'color': 'var(--color-text)'
                                                        }}
                                                    >
                                                        <div className="text-3xl mb-1">{option.emoji}</div>
                                                        <div className="text-xs font-medium">{option.label}</div>
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>

                            {/* Navigation */}
                            <div className="bg-gray-50 p-6 flex justify-between items-center" style={{ backgroundColor: 'var(--color-background)', borderTop: '1px solid var(--color-secondary)' }}>
                                <button
                                    onClick={() => setCurrentSectionIndex(Math.max(0, currentSectionIndex - 1))}
                                    disabled={currentSectionIndex === 0}
                                    className={`
                                        px-6 py-3 rounded-full font-bold transition-all
                                        ${currentSectionIndex === 0
                                            ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                            : 'bg-gray-400 text-white hover:bg-gray-500'
                                        }
                                    `}
                                    style={{ backgroundColor: currentSectionIndex === 0 ? 'var(--color-secondary)' : 'var(--color-text)', color: currentSectionIndex === 0 ? 'var(--color-text)' : 'var(--color-secondary)' }}
                                >
                                    <i class="fas fa-chevron-left"></i> Back
                                </button>

                                <button
                                    onClick={handleNext}
                                    disabled={!isSectionComplete(currentSectionIndex)}
                                    className={`
                                        px-8 py-3 rounded-full font-bold transition-all transform
                                        ${isSectionComplete(currentSectionIndex)
                                            ? 'shadow-lg hover:scale-105'
                                            : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                        }
                                    `}
                                    style={{ 
                                        backgroundColor: isSectionComplete(currentSectionIndex) ? 'var(--color-primary)' : 'var(--color-secondary)', 
                                        color: isSectionComplete(currentSectionIndex) ? 'var(--color-background)' : 'var(--color-text)'
                                    }}
                                >
                                    {currentSectionIndex === SECTIONS.length - 1 ? 'Finish! üéâ' : 'Next Section ‚Üí'}
                                </button>
                            </div>
                        </div>

                        {/* Encouragement */}
                        <div className="text-center mt-6">
                            <p className="text-sm font-medium" style={{ color: 'var(--color-text)' }}>
                                {isSectionComplete(currentSectionIndex) 
                                    ? "Great job! Click 'Next Section' to keep going! ‚≠ê"
                                    : "Take your time and pick what feels right üí°"}
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ChildAssessmentApp />);
    </script>
</body>
</html>
